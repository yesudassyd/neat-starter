--- 
layout: doctor
---
<div class="container max-w-3xl pt-5" style="margin-top: 100px;" >

    <h1 class="font-bold">Our Doctors</h1>

</div>
<div class="container max-w-3xl " style="margin-top: -50px;">
    <section id="api-container" 
            data-urls='[
                {% for api in collections.api %}
                    "{{ api.data.url }}"{{ "," if not loop.last }}
                {% endfor %}
            ]'>
            <ul id="doctor_list"></ul>
        </section>
        <script>
        try{
            const apiContainer = document.getElementById('api-container');
            const apiUrls = JSON.parse(apiContainer.getAttribute('data-urls'));
            for(let i =0; i< apiUrls.length; i++){
            fetch(apiUrls[i])
            .then( res => {
                return res.json()
            })
            .then(data => {
            dataRender(data)
            }).catch(error => console.log(error))
        }

        function dataRender(data){
            const doctorList  = document.getElementById("doctor_list")

            data.forEach(element => {
                const doctorData = document.createElement('li')
                const link = document.createElement('a')
                link.textContent = element.name
                link.target = "_blank"
                link.href = `../doctor_profile?name=${encodeURIComponent(element.name)}&id=${encodeURIComponent(element.id)}&createdAt=${encodeURIComponent(element.createdAt)}`;
                doctorData.appendChild(link)
                doctorList.appendChild(doctorData)
            });
        }

        }catch(e){
            console.log(e)
        }
        </script>
    <style>
        .mt-15 { margin-top: 15px; }
    </style>
</div>
